# CTP程序接入中泰证券XTP柜台

CTP开放平台已经发布了中泰证券XTP柜台的CTP兼容接口，以CTP接口对XTP接口进行封装，使得CTP程序无需任何修改，只是更换一下CTP动态库，就可以接入中泰证券柜台交易股票、债券、ETF期权等商品。

模拟平台的动态库（dll、so等文件）只是对中泰证券接口的简单封装，不是经过模拟平台的模拟服务器进行转发，而是直接调用中泰证券的dll与柜台进行交互，所以登录用户名、密码均为中泰证券柜台用户名、密码，模拟账户申请需至中泰证券XTP官网申请，该接入方式同样支持实盘。

接入方式，在[开放平台中泰证券](https://github.com/krenx1983/openctp/tree/master/ctp2%E4%B8%AD%E6%B3%B0%E8%AF%81%E5%88%B8XTP)目录下下载相应CTP版本的dll，交易dll有两个文件，thosttraderapi_se.dll为模拟平台的封装dll，xtptraderapi.dll为中泰证券发布的接口dll，行情也同样是有两个，交易与行情的dll互相独立，可以只接交易或只接行情。

下载相应的动态库，覆盖现有CTP程序相应动态库，测试环境地址为中泰证券的7x24环境：

行情前置地址：tcp://119.3.103.38:6002

交易前置地址：tcp://122.112.139.0:6101

中泰证券XTP模拟平台是跟simnow类似的证券模拟平台，采用与CTP类似的开放式API，更多信息请至官网了解：https://xtp.zts.com.cn/

**<u>注意：openctp封装的中泰证券CTPAPI基于XTP接口2.2.36.1版本封装，也将随着XTP接口的更新而更新。</u>**

**<u>注意：openctp的linux封装接口对应的libc版本是libc-2.17。</u>**

**<u>注意：由于XTP的原生交易API不提供查询合约接口，且因接口设计限制不便在交易接口中整合行情接口，因此提供了一个合约字典文件，在仿CTPAPI的合约查询中，会通过读取该文件来响应合约查询应答，该文件（dict.csv）需要放在程序的运行目录下，基本与dll放在同一目录即可。</u>**

**<u>注意：由于XTP的授权码较长，超出了CTP的AppID和AuthCode两个字段，因此你的CTP程序要先赋值AppID后赋值AuthCode，以免AuthCode超出部分被后赋值的AppID覆盖掉一部分，记得赋值AuthCode时要允许越界。</u>**

**<u>注意：XTP接口允许多个终端同时在线，但是每个终端的ClientID不能一样，开放平台提供的仿CTPAPI在调用XTP接口时使用了固定的ClientID为80，请不要在其它终端中配置ClientID为80，以避免冲突。</u>**
